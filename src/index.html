<html>
  <head>
    <link href="/output.css" rel="stylesheet" />
  </head>
  <body>
    <div
      class="grid min-h-full w-screen justify-center content-center text-sm sm:text-xl md:text-l lg:text-sm"
    >
      <div>
        <img
          id="video-1"
          src="/out_0.mp4"
          class="opacity-0 object-contain transition-opacity duration-1000 hidden max-h-99"
        />
        <img
          id="video-2"
          src="/out_1.mp4"
          class="opacity-0 object-contain transition-opacity duration-1000 hidden max-h-99"
        />
        <div
          class="flex flex-col content-center justify-center text-center mt-3"
        >
          <span
            id="name"
            class="cursor-pointer tracking-widest transition-opacity duration-1000"
            >samuel clovis + georgina baronian &amp; associates</span
          >
          <a
            id="email"
            href="mailto:contact@clovisbaronian.com"
            class="hidden tracking-widest opacity-0 transition-opacity duration-1000"
            >contact@clovisbaronian.com</a
          >
        </div>
      </div>
    </div>
    <script>
      let animating = false;
      let shown = null;
      document.body.onclick = function () {
        if (animating) {
          return;
        }
        animating = true;
        document.querySelector("#name").classList.add("opacity-0");

        const videos = ["#video-1", "#video-2"];
        shown =
          shown === null
            ? Math.floor(Math.random() * videos.length)
            : shown === 1
            ? 0
            : 1;
        const show = videos.splice(shown, 1);

        document.querySelector(videos[0]).classList.remove("opacity-100");
        document.querySelector(videos[0]).classList.add("opacity-0");

        setTimeout(() => {
          document.querySelector("#name").classList.add("hidden");
          document.querySelector(videos[0]).classList.add("hidden");
          document.querySelector(show[0]).classList.remove("hidden");
          document.querySelector("#email").classList.remove("hidden");
          setTimeout(() => {
            document.querySelector("#email").classList.add("opacity-100");
            document.querySelector(show[0]).classList.add("opacity-100");
            setTimeout(() => {
              animating = false;
            }, 1000);
          }, 200);
        }, 1000);
      };
      var videoAttr = {};
      Array.prototype.map.call(
        document.querySelectorAll('img[src*=".mp4"]'),
        function (img) {
          var src = img.src;
          img.src = null;

          img.addEventListener("error", function (e) {
            console.log("MP4 in image not supported. Replacing with video", e);
            var video = document.createElement("video");

            for (var key in videoAttr) {
              video.setAttribute(key, videoAttr[key]);
            }
            video.setAttribute("autoplay", true);
            video.setAttribute("loop", true);
            video.setAttribute("mute", true);
            video.setAttribute("playsinline", true);

            for (const attr of img.attributes) {
              video.setAttribute(attr.name, attr.value);
            }

            img.parentNode.insertBefore(video, img);
            img.parentNode.removeChild(img);
          });

          img.src = src;
        }
      );
    </script>
  </body>
</html>
